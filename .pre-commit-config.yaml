---
repos:
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.0.1
    hooks:
      - id: check-merge-conflict
      - id: check-case-conflict
      - id: trailing-whitespace
        exclude_types: [markdown]
      - id: end-of-file-fixer
      - id: check-added-large-files
      - id: fix-byte-order-marker
  - repo: https://github.com/pre-commit/mirrors-prettier
    rev: v2.4.1
    hooks:
      - id: prettier
        types_or: [yaml, css]
  - repo: https://github.com/adrienverge/yamllint
    rev: v1.26.3
    hooks:
      - id: yamllint
  - repo: https://github.com/igorshubovych/markdownlint-cli
    rev: v0.29.0
    hooks:
      - id: markdownlint
  - repo: https://github.com/koalaman/shellcheck-precommit
    rev: v0.8.0
    hooks:
      - id: shellcheck
        name: check .envrc with shellcheck
        args: [-s, bash]
        files: .envrc$
        types: []
  - repo: https://github.com/rhysd/actionlint
    rev: v1.6.8
    hooks:
      - id: actionlint-docker
  - repo: local
    hooks:
      - id: deno-fmt
        name: format js, ts, tsx, md, and json files with deno fmt
        language: system
        entry: deno fmt
        types_or: [javascript, ts, tsx, markdown, json]
      - id: deno-lint
        name: check ts and tsx files with deno lint
        language: system
        entry: deno lint
        types_or: [ts, tsx]
      - &stylelint
        id: stylelint
        name: format css files with stylelint
        language: node
        types: [css]
        minimum_pre_commit_version: 0.7.0
        additional_dependencies:
          - "stylelint@14.1.0"
          - "stylelint-config-standard@24.0.0"
          - "stylelint-config-recess-order@3.0.0"
          - "stylelint-config-prettier@9.0.3"
        entry: stylelint --fix
      - name: check css files with stylelint
        entry: stylelint
        <<: *stylelint
      - id: download-script
        name: check download script
        language: system
        entry: just download
        files: scripts/download.ts$
        pass_filenames: false
      - id: build-aleph
        name: check ts, tsx, and css files with aleph build
        language: system
        entry: just build-aleph
        types_or: [ts, tsx, css]
        exclude: scripts/*$
        pass_filenames: false
      - id: lhci
        name: check with lhci
        language: node
        entry: lhci autorun
        types_or: [ts, tsx, css]
        additional_dependencies: ["@lhci/cli@0.8.2", "puppeteer@11.0.0"]
        pass_filenames: false
      - id: taplo-format
        name: format toml files with taplo format
        language: node
        entry: taplo format
        types: [toml]
        additional_dependencies: ["@taplo/cli@0.3.2"]
      - id: taplo-lint
        name: check toml files with taplo lint
        language: node
        entry: taplo lint
        types: [toml]
        additional_dependencies: ["@taplo/cli@0.3.2"]
      - id: just
        name: format justfile with just --fmt option
        language: system
        entry: just --fmt --unstable
        files: justfile$
        pass_filenames: false
      - id: shfmt
        name: format .envrc with shfmt
        minimum_pre_commit_version: 2.4.0
        language: docker_image
        entry: mvdan/shfmt:v3.4.0 -w
        files: .envrc$
      - id: shellharden
        name: format .envrc with shellharden
        minimum_pre_commit_version: 1.10.0
        language: rust
        entry: shellharden --replace
        files: .envrc$
        additional_dependencies: ["cli:shellharden:4.1.1"]
      - id: commitlint
        name: check commit message with commitlint
        language: node
        minimum_pre_commit_version: 0.7.0
        additional_dependencies:
          - "@commitlint/cli@15.0.0"
          - "@commitlint/config-conventional@15.0.0"
        stages: [commit-msg]
        entry: commitlint --edit
