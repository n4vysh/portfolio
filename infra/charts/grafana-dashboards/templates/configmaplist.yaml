apiVersion: v1
kind: ConfigMapList
items:
  {{- range $k, $v := .Values.dashboards }}
  - apiVersion: v1
    kind: ConfigMap
    metadata:
      name: grafana-dashboard-{{ $k }}
      labels:
        grafana_dashboard: "1"
      annotations:
        k8s-sidecar-target-directory: "/tmp/dashboards/custom"
    data:
      {{ $k }}.json: |-
        {{- $v | nindent 8 -}}
  {{- end }}
